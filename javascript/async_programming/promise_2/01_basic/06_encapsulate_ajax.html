<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>

    <!--    <script crossorigin src="https://cdn.jsdelivr.net/npm/immutability-helper-x@1.0.5/lib/index.min.js"></script>-->
</head>
<body>

<div id="root">
    <div class="text-center my-5 col-6">
        <button class="btn btn-primary" onclick="fetchData()">
            Fetch Data
        </button>
    </div>

</div>

<script>
    // fake rest api
    // https://jsonplaceholder.typicode.com/todos/1


    // NOTE: Promise encapsulate XMLHttpRequest
    const sendAjax = (url) => {
        return new Promise((resolve, reject) => {
            // create XMLHttpRequest object
            const xhr = new XMLHttpRequest();

            // set response type
            xhr.responseType = 'json';

            // init request
            xhr.open('GET', url);

            // send request
            xhr.send()

            // handle response
            xhr.onreadystatechange = () => {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        resolve(xhr.response);
                    } else {
                        reject(xhr.status);
                    }
                }
            }
        })
    }

    const url = 'https://jsonplaceholder.typicode.com/todos/1';

    const fetchData = () => {
        sendAjax(url)
            .then(data => {
                    console.log(data);
                },
                err => {
                    console.log(err);
                })
    }
</script>

</body>
</html>
